\section{Introduction to Affine Toric Varieties}

\begin{definition}
  \label{torusOver}
  \lean{torusOver}
  \leanok
  The (algebraic) torus $\Gm^n = \Spec(R[x_1^{\pm 1}, \dotsc, x_n^{\pm 1}])$ over $\Spec R$.
\end{definition}

\begin{definition}
  \label{char}
  Character: a group morphism $\chi : \Gm^n \to \Gm$.
\end{definition}

\begin{definition}
  \label{one_ps}
  One-parameter subgroup: a group morphism $\lambda : \Gm \to \Gm^n$.
\end{definition}

\begin{definition}
  \label{char_lattice}
  \uses{char}
  Character lattice $M = X(\Gm^n) := \Hom_{\mathsf{GrpSch}}(\Gm^n, \Gm)$.
\end{definition}

\begin{proposition}
  \label{charTor}
  \uses{char}
  $M = X(\Gm^n) \cong \Z^n$. For $m \in M$ we write $\chi^m$ for the corresponding character.
\end{proposition}

\begin{definition}
  \label{ops_lattice}
  \uses{one_ps}
  One-parameter subgroup/cocharacter lattice $N := \Hom(\Gm, \Gm^n)$.
\end{definition}

\begin{proposition}
  \label{prop:1.1.1.a}
  \uses{torusOver}
  Proposition 1.1.1(a): if $T_1, T_2$ are tori and $\Phi : T_1 \to T_2$ is a morphism which is a group homomorphism, then $\im \Phi$ is a closed subvariety which is a torus.
\end{proposition}

\begin{proposition}
  \label{prop:1.1.1.b}
  \uses{torusOver}
  Proposition 1.1.1(b): if $H \subseteq T$ is an irreducible subvariety which is a subgroup, then $H$ is a torus.
\end{proposition}

\begin{definition}
  \label{char_eigenspace}
  \uses{char}
  Character eigenspace
\end{definition}

\begin{proposition}
  \label{prop:1.1.2}
  \uses{char_eigenspace, torusOver}
  Proposition 1.1.2
\end{proposition}

\begin{definition}
  \label{char_ops_pairing}
  Character lattice and one-parameter subgroup pairing
\end{definition}

\begin{proposition}
  \uses{ops_lattice}
  $N = \Hom(M, \Z) \cong  \Z^n$. For $u \in N$ we write $\lambda^u$ for the corresponding cocharacter.
\end{proposition}
\begin{proof}
  \uses{charTor}
  \uses{char_ops_pairing}
\end{proof}

\begin{definition}
  \label{ToricVariety}
  \lean{ToricVariety}
  \leanok
  \uses{torusOver}
  A toric variety is a variety $X$ with
  \begin{itemize}
    \item an open embedding $T := (\C^\times)^n \hookrightarrow X$ with dense image
    \item such that the natural action $T \times T \to T$ of the torus on itself extends to an (algebraic) action $T \times X \to X$.
  \end{itemize}
\end{definition}

\begin{definition}
  \label{phiA}
  \uses{torusOver}
  \uses{char}
  Given a finite set $\mathcal A = \{a_1, \dotsc, a_s\} \subseteq M$, define $\Phi_{\mathcal{A}} : T \to \mathbb A^s$ given by $\Phi_{\mathcal A} (t) = (\chi^{a_1} (t), \dotsc, \chi^{a_s} (t))$.
\end{definition}

\begin{definition}
  \label{YA}
  \uses{phiA}
  $Y_{\mathcal{A}}$ is the (Zariski) closure of $\im \Phi_{\mathcal A}$ in $\mathbb A^s$.
\end{definition}

\begin{proposition}
  \label{prop:1.1.8}
  \uses{YA}
  \uses{char_lattice}
  Proposition 1.1.8
\end{proposition}
\begin{proof}
  \uses{prop:1.1.1.a}
\end{proof}

\begin{proposition}
  \label{prop:1.1.9}
  \uses{YA}
  Proposition 1.1.9
\end{proposition}

\begin{definition}
  \label{AddMonoidAlgebra.IsToricIdeal}
  \lean{AddMonoidAlgebra.IsToricIdeal}
  \leanok
  A lattice ideal $I_L = \langle x^\alpha - x^\beta |  \alpha, \beta \in \N^s \text{ and } \alpha - \beta \in L\rangle$, for some lattice $L \subseteq \Z^s$.

  A toric ideal is a prime lattice ideal.
\end{definition}

\begin{proposition}
  \label{AddMonoidAlgebra.isToricIdeal_iff_exists_span_single_sub_single}
  \uses{AddMonoidAlgebra.IsToricIdeal}
  \lean{AddMonoidAlgebra.isToricIdeal_iff_exists_span_single_sub_single}
  Proposition 1.1.11: an ideal is toric if and only if it's prime and generated by binomials $x^\alpha - x^\beta$.
\end{proposition}
\begin{proof}
  \uses{prop:1.1.1.b, prop:1.1.9}
\end{proof}

\begin{definition}
  \label{affSemi}
  \uses{AddCommMonoid}
  \uses{AddMonoid.FG}
  \uses{AddMonoid.IsTorsionFree}
  An affine monoid is a finitely generated submonoid of $(\Z^n, +)$. Equivalently it's a finitely generated commutative monoid which is:
  \begin{itemize}
    \item cancellative: if $a + c = b + c$ then $a = b$, and
    \item torsion-free: if $n a = n b$ then $a = b$ (for $n \geq 1$).
  \end{itemize}
\end{definition}

\begin{proposition}
  \label{prop:1.1.14}
  \uses{affSemi}
  \uses{ToricVariety}
  \uses{char_lattice}
  \uses{YA}
  If $S$ is an affine monoid, then
  \begin{enumerate}
    \item $\Bbbk[S]$ is an integral domain and is a finitely generated $\Bbbk$-algebra.
    \item $\Spec(\Bbbk[S])$ is an affine toric variety with character lattice $\Z S$.
    \item If $\mathcal A$ is a finite (monoid) generating set of $S$, then $\Spec(\Bbbk[S]) = Y_{\mathcal A}$.
  \end{enumerate}
\end{proposition}
\begin{proof}
  \uses{prop:1.1.8}
  $i : \Bbbk[S] \hookrightarrow \Bbbk[\Z S]$ injects into an integral domain so is an integral domain. It's finitely generated by $\chi^{a_i}$ where $\mathcal A = \{a_1, \dotsc, a_s\}$ is a finite generating set for $S$.

  $i$ induces a morphism $T \to \Spec(\Bbbk[S])$. It's an open embedding as $i$ gives the localization of $\Bbbk[S]$ at $\chi^{a_i}$, so $\im i$ is an affine open. It's dominant as $\Spec(\Bbbk[S])$ is integral and so is irreducible, and $\im i$ is open and nonempty, so dense. The torus action is given by the natural restriction of comultiplication on $\Bbbk[x_1^{\pm1}, \dotsc, x_n^{\pm1}]$.

  We get a $\Bbbk$-algebra homomorphism $\pi : \Bbbk[x_1, \dotsc, x_s] \to \Bbbk[\Z S]$ given by $\mathcal A$; this induces a morphism $\Phi_{\mathcal A} : T \to \Bbbk^s$. The kernel of $\pi$ is the toric ideal of $Y_{\mathcal A}$ and $\pi$ is clearly surjective, so $Y_{\mathcal A} = \mathbb V(\ker(\pi)) = \Spec(\Bbbk[x_1, \dotsc, x_s] / \ker(\pi)) = \Spec(\C[S])$.
\end{proof}

\begin{definition}
  \label{torActOnAlg}
  \uses{Torus}
  Torus action on semigroup algebra
\end{definition}

\begin{lemma}
  \label{lmm:1.1.16}
  \uses{torActOnAlg}
\end{lemma}
\begin{proof}
  \uses{prop:1.1.2}
\end{proof}

\begin{theorem}
  \label{thm:1.1.17}
  \uses{ToricVariety, YA, AddMonoidAlgebra.IsToricIdeal, affSemi}
  TFAE:
  \begin{enumerate}
    \item $V$ is an affine toric variety.
    \item $V = Y_{\mathcal A}$ for some finite $\mathcal A$.
    \item $V$ is an affine variety defined by a toric ideal.
    \item $V = \Spec \Bbbk[S]$ for an affine monoid $S$.
  \end{enumerate}
\end{theorem}
\begin{proof}
  \uses{torActOnAlg, prop:1.1.8, prop:1.1.9, prop:1.1.14, lmm:1.1.16}
\end{proof}
